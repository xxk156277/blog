# http

## Http0.9

https://juejin.cn/post/6856036933723521032?utm_source=gold_browser_extension

## http 1.0

引入了请求头和响应头

**特点**：

1. 对文件良好支持：
   - 支持文件类型，浏览器需要知道返回数据的类型
   - 支持压缩后传输
   - 指明使用语言的版本
   - 为了准确读取文件，浏览器需要知道文件的编码类型
2. 引入状态码，方便将服务器处理请求的情况告知浏览器 
3. 提供cache机制，减轻服务器压力
4. 请求头中加入了用户代理User Agent字段，方便服务器统计客户端的基本信息

**传输层协议：TCP**

**缺点：**

1. 每一次http通信，都需要建立TCP链接，传输http数据和断开TCP链接，开销大。
2. 请求只能按顺序进行，若一个请求没有及时返回，会引起阻塞。
3. 没个域名绑定一个唯一的IP地址，导致一个服务器也只能支持一个域名
4. Content-Length来设置数据大小，导致无法接受动态内容
5. 浪费带宽

## http1.1

**特点：**

1. 支持持久链接。一个TCP链接可以传输多个HTTP请求（目前最多六个），若浏览器和服务端没有明确的断开链接，TCP会一致保持。Connection : keep alive
2. 虚拟主机 -> 一个IP可以对应多个域名 -> 请求头增加host字段，表示当前域名 -> 服务器根据host值做各种处理
3. 支持动态生成的内容。Chunk transfer（分块传输编码）
4. 引入Cookie机制和安全机制
5. 在请求头中引入range头域，允许请求资源的某个部分，返回码是206
6. 引入更多的缓存策略
7. 新增24个错误状态响应码

**传输层协议：TCP**

**缺点：**

TCP本身缺陷导致：

1. TCP慢启动。小文件传输花费时间长
2. 多条TCP之间不会协商资源的优先级

HTTP 1.1机制导致

1. 队头阻塞。同一个TCP链接中，一个只能处理一个请求。

## http2.0

![](https://gitee.com/alvin0216/cdn/raw/master/images/http2.png)

## http3.0

![](https://gitee.com/alvin0216/cdn/raw/master/images/http3.png)
